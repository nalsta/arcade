<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Mini Arcade</title>
<style>
body{
  margin:0;
  background:#111;
  color:white;
  font-family:Arial;
  text-align:center;
}
button{
  margin:10px;
  padding:10px 20px;
  font-size:16px;
  cursor:pointer;
}
canvas{
  background:black;
  display:block;
  margin:20px auto;
}
</style>
</head>
<body>

<h1>ðŸŽ® Mini Arcade</h1>

<div id="menu">
  <button onclick="startGame('snake')">Snake</button>
  <button onclick="startGame('pong')">Pong</button>
</div>

<canvas id="game" width="500" height="400"></canvas>

<script>
/* =====================
   ARCADE CORE
   ===================== */
const Arcade={
  game:"",
  score:0,
  data:JSON.parse(localStorage.getItem("scores")||"{}"),

  start(name){
    this.game=name;
    this.score=0;
  },

  add(points){
    this.score+=points;
    if(!this.data[this.game]||this.score>this.data[this.game]){
      this.data[this.game]=this.score;
      localStorage.setItem("scores",JSON.stringify(this.data));
    }
  },

  leaderboard(ctx){
    let y=20;
    ctx.fillStyle="white";
    ctx.fillText("LEADERBOARD",350,20);
    Object.entries(this.data)
      .sort((a,b)=>b[1]-a[1])
      .forEach(([g,s])=>{
        y+=15;
        ctx.fillText(g+": "+s,350,y);
      });
  }
};

/* =====================
   GAME ENGINE
   ===================== */
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
let loop=null;

/* =====================
   SNAKE
   ===================== */
let snake,food,dir;

function snakeGame(){
  Arcade.start("snake");
  snake=[[200,200]];
  food=[100,100];
  dir=[20,0];

  addEventListener("keydown",e=>{
    if(e.key==="ArrowUp")dir=[0,-20];
    if(e.key==="ArrowDown")dir=[0,20];
    if(e.key==="ArrowLeft")dir=[-20,0];
    if(e.key==="ArrowRight")dir=[20,0];
  });

  loop=setInterval(()=>{
    ctx.clearRect(0,0,500,400);
    let head=[snake[0][0]+dir[0],snake[0][1]+dir[1]];
    snake.unshift(head);

    if(head[0]===food[0]&&head[1]===food[1]){
      Arcade.add(10);
      food=[Math.floor(Math.random()*25)*20,Math.floor(Math.random()*20)*20];
    }else snake.pop();

    ctx.fillStyle="lime";
    snake.forEach(p=>ctx.fillRect(p[0],p[1],18,18));

    ctx.fillStyle="red";
    ctx.fillRect(food[0],food[1],18,18);

    ctx.fillStyle="white";
    ctx.fillText("Score: "+Arcade.score,10,15);
    Arcade.leaderboard(ctx);
  },120);
}

/* =====================
   PONG
   ===================== */
let ball,p1,p2;

function pongGame(){
  Arcade.start("pong");
  ball={x:250,y:200,dx:4,dy:4};
  p1={y:150};
  p2={y:150};

  addEventListener("keydown",e=>{
    if(e.key==="w")p1.y-=20;
    if(e.key==="s")p1.y+=20;
    if(e.key==="ArrowUp")p2.y-=20;
    if(e.key==="ArrowDown")p2.y+=20;
  });

  loop=setInterval(()=>{
    ctx.clearRect(0,0,500,400);

    ball.x+=ball.dx;
    ball.y+=ball.dy;
    if(ball.y<0||ball.y>390)ball.dy*=-1;

    if(ball.x<20&&ball.y>p1.y&&ball.y<p1.y+80)ball.dx*=-1;
    if(ball.x>470&&ball.y>p2.y&&ball.y<p2.y+80)ball.dx*=-1;

    if(ball.x<0||ball.x>500){
      Arcade.add(1);
      ball={x:250,y:200,dx:4,dy:4};
    }

    ctx.fillRect(10,p1.y,10,80);
    ctx.fillRect(480,p2.y,10,80);
    ctx.fillRect(ball.x,ball.y,10,10);

    ctx.fillText("Score: "+Arcade.score,10,15);
    Arcade.leaderboard(ctx);
  },30);
}

/* =====================
   START GAME
   ===================== */
function startGame(name){
  clearInterval(loop);
  ctx.clearRect(0,0,500,400);
  if(name==="snake")snakeGame();
  if(name==="pong")pongGame();
}
</script>

</body>
</html>
